<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>sf equivalent of QGIS Union — st_or • sfhelpers</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="sf equivalent of QGIS Union — st_or"><meta property="og:description" content="sf equivalent of QGIS Union"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfhelpers</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">
    <span class="far fa-file-code"></span>
     
    Functions &amp; Datasets
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/rbindlist_issues.html">Issues with `data.table::rbindlist()`</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">
    <span class="far fa-newspaper"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/a-benini/sfhelpers/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><code>sf</code> equivalent of QGIS Union</h1>
    <small class="dont-index">Source: <a href="https://github.com/a-benini/sfhelpers/blob/HEAD/R/st_or.R" class="external-link"><code>R/st_or.R</code></a></small>
    <div class="hidden name"><code>st_or.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>sf</code> equivalent of QGIS Union</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">st_or</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  dim <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span>,</span>
<span>  suffix.all <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_overlap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use_st_combine <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>object of class <code>sf</code>, <code>sfc</code> or <code>sfg</code></p></dd>


<dt>y</dt>
<dd><p>object of class <code>sf</code>, <code>sfc</code> or <code>sfg</code></p></dd>


<dt>dim</dt>
<dd><p>integer: A combination of 0, 1, and/or 2 (default) that constrains
the dimension(s) of the returned geometries. 0 for points, 1 for lines, 2 for
surfaces.</p></dd>


<dt>suffix</dt>
<dd><p>length 2 character vector (default <code>c(".x", ".y")</code>) attached as
suffix to attribute headings inherited from argument <code>x</code> resp. from <code>y</code></p></dd>


<dt>suffix.all</dt>
<dd><p><code>TRUE</code> suffixes all attribute headings inherited from
arguments <code>x</code> and <code>y</code> according to <code>suffix</code>; <code>FALSE</code> (default)
suffixes only homonymous attribute headings.</p></dd>


<dt>check_overlap</dt>
<dd><p><code>TRUE</code> detects those geometries included in
<code>x</code> and <code>y</code> which overlap with the other input layer and applies
geometric operations only on these; <code>FALSE</code> (default) applies geometric
operations on all geometries (s. Details).</p></dd>


<dt>use_st_combine</dt>
<dd><p><code>TRUE</code> (default) applies internally
<code>st_union(st_combine())</code> to <code>x</code> and <code>y</code>; <code>FALSE</code> leaves out
<code><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_combine</a></code> and only uses <code><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></code>, which
might be slower, but more reliable (s. Details of <code><a href="st_erase_robust.html">st_erase_robust</a></code>).</p></dd>


<dt>...</dt>
<dd><p>arguments passed on to <code><a href="https://r-spatial.github.io/s2/reference/s2_options.html" class="external-link">s2_options</a></code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>geometry set containing the intersection of <code>x</code> and <code>y</code> and
the non-overlapping parts of <code>x</code> and <code>y</code>. The attribute table is
filled with attribute values from the respective original geometry set for
non-overlapping features, and attribute values from both geometry sets for
overlapping features. The dimension(s) of the returned geometries is/are
determined with the argument <code>dim</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>st_or()</code> consists at its core of code presented by
<a href="https://gis.stackexchange.com/questions/251440/ogr2ogr-equivalent-of-qgis-union/251575#251575" class="external-link">TimSalbim on gis.stackexchange</a>
. In addition to its precursor this version of <code>st_or()</code> includes:</p><ul><li><p>a more robust version of the internal function <code>st_erase()</code>
equivalent to <code><a href="st_erase_robust.html">st_erase_robust</a></code></p></li>
<li><p>the ability to handle homonymous attribute variables of both input
geometry sets (s. below examples)</p></li>
<li><p>the possibility to give customized suffixes to attribute variables
corresponding to the geometry set they originated from (s. below examples)</p></li>
<li><p>handling of input layers with differently named geometry columns
and/or being totally overlapped by the other input layer.</p></li>
<li><p>optional restriction of the geometric operations to geometries of the
input layers <code>x</code> and <code>y</code> overlapping those of the other input
layer (argument <code>check_overlap = TRUE</code>). In case of a significant
proportion of non-overlapping geometries, this can shorten run time. As the
internal distinction of overlapping and non-overlapping geometries relies
on <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">st_intersects</a></code>, which itself is time consuming, setting
<code>check_overlap</code> to <code>TRUE</code> involves a trade off: If all geometries
overlap, <code>check_overlap = TRUE</code> will only increase the run time. On
the other hand, the higher the proportion of non-overlapping geometries,
the more this argument specification shortens the processing time by
leaving out unnecessary geometric operations. Ideally the user has previous
knowledge about how little or how much the input layers <code>x</code> and
<code>y</code> overlap with each other in order to apply <code>check_overlap</code> in
a informed way.</p></li>
</ul><p>If the coordinates of the input are longlat degrees, setting
<code><a href="https://r-spatial.github.io/sf/reference/s2.html" class="external-link">sf_use_s2</a></code> to <code>FALSE</code> can help to speed up
<code><a href="st_erase_robust.html">st_erase_robust()</a></code> and thus also <code>st_or()</code>. For information on
this see details and examples sections of <code><a href="st_erase_robust.html">st_erase_robust</a></code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:terra’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:raster’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, select, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-plt img"><img src="st_or-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     A.x  B    C  A.y  D    E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Pq  1 1983    z 48 2015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    Pq  1 1983    y 36 2016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    Qr  2 1984    y 36 2016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    Pq  1 1983    x 24 2017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    Rs  3 1985    x 24 2017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    Pq  1 1983    w 12 2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    Qr  2 1984    w 12 2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    Rs  3 1985    w 12 2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    St  4 1986    w 12 2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   Qr  2 1984 &lt;NA&gt; NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   Rs  3 1985 &lt;NA&gt; NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   St  4 1986 &lt;NA&gt; NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 &lt;NA&gt; NA   NA    z 48 2015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 &lt;NA&gt; NA   NA    y 36 2016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 &lt;NA&gt; NA   NA    x 24 2017</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to avoid repeated warning messages triggered by non-spatially constant ...</span></span></span>
<span class="r-in"><span><span class="co"># ... attribute variables, set them all to "constant":</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_agr.html" class="external-link">st_agr</a></span><span class="op">(</span><span class="va">poly_1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"constant"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_agr.html" class="external-link">st_agr</a></span><span class="op">(</span><span class="va">poly_2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"constant"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Give customized suffixes to homonymous attributes of layers x and y:</span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_poly_1"</span>, <span class="st">"_poly_2"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="st_or-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If only homonymous attributes from one layer should get a suffix, set ...</span></span></span>
<span class="r-in"><span><span class="co"># ... the suffix for the other layer to an empty string:</span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A"        "B"        "C"        "A.y"      "D"        "E"        "geometry"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If all attributes attributes of both layers x and y should get a</span></span></span>
<span class="r-in"><span><span class="co"># ... layer-specific suffix, set suffix.all = TRUE:</span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span>, suffix.all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A.x"      "B.x"      "C.x"      "A.y"      "D.y"      "E.y"      "geometry"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If only all attributes from one layer should get a suffix, set the suffix ...</span></span></span>
<span class="r-in"><span><span class="co"># ... for the other layer to an empty string and set suffix.all = TRUE:</span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">poly_1</span>, <span class="va">poly_2</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">".y"</span><span class="op">)</span>, suffix.all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A"        "B"        "C"        "A.y"      "D.y"      "E.y"      "geometry"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create two layers with overlapping linestrings:</span></span></span>
<span class="r-in"><span><span class="va">ls1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ls2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ls3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2.5</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span>id_A <span class="op">=</span> <span class="fl">1</span>, A <span class="op">=</span> <span class="st">"A"</span>, geom <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">ls1</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span>id_B <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, B <span class="op">=</span> <span class="st">"B"</span>, geom <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">ls2</span>, <span class="va">ls3</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"gray"</span>, lwd <span class="op">=</span> <span class="fl">4</span>, extent <span class="op">=</span> <span class="fu"><a href="st_bbox_common.html">st_bbox_common</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span>, lty <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"right"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gray"</span>, <span class="st">"red"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="st_or-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># when both input layers consist of linestings, and if the default specification ...</span></span></span>
<span class="r-in"><span><span class="co"># ... dim = 2 (for surfaces / (multi)polygons) is used, a sf-object with zero ...</span></span></span>
<span class="r-in"><span><span class="co"># ... rows will be returned:</span></span></span>
<span class="r-in"><span><span class="fu">st_or</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 0 features and 4 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CRS:           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] id_A A    id_B B    geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;0 rows&gt; (or 0-length row.names)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to get lines returned set dim = 1:</span></span></span>
<span class="r-in"><span><span class="va">comb_dim_1</span> <span class="op">&lt;-</span> <span class="fu">st_or</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, dim <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>, <span class="st">"B"</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span>, <span class="st">"A"</span>, <span class="st">"A+B"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">comb_dim_1</span><span class="op">[</span>, <span class="st">"comb"</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="fl">3</span>, key.pos <span class="op">=</span> <span class="fl">1</span>, main <span class="op">=</span> <span class="st">"dim = 1: only lines"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="st_or-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># for returning lines and points where lines cross or touch lines of the other ...</span></span></span>
<span class="r-in"><span><span class="co"># ... input layer, set dim = c(0, 1):</span></span></span>
<span class="r-in"><span><span class="va">comb_dim_0_1</span> <span class="op">&lt;-</span> <span class="fu">st_or</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>, <span class="st">"B"</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span>, <span class="st">"A"</span>, <span class="st">"A+B"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">comb_dim_0_1</span><span class="op">[</span>, <span class="st">"comb"</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="fl">3</span>, cex <span class="op">=</span> <span class="fl">2</span>, key.pos <span class="op">=</span> <span class="fl">1</span>, main <span class="op">=</span> <span class="st">"dim = c(0, 1): points &amp; lines"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="st_or-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">st_or</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="co"># returns points &amp; lines</span></span></span>
<span class="r-in"><span>  <span class="fu">st_or</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="co"># returns points, lines (&amp; if available surfaces)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Attilio Benini.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

