<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert a list of sf objects to a single sf object — st_rbindlist • sfhelpers</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert a list of sf objects to a single sf object — st_rbindlist" />
<meta property="og:description" content="A fast alternative to do.call(rbind, &amp;lt;list_of_sf&amp;gt;)" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfhelpers</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="far fa-file-code"></span>
     
    Functions &amp; Datasets
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rbindlist_issues.html">Issues with `data.table::rbindlist()`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="far fa-newspaper"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/a-benini/sfhelpers/">
    <span class="fab fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a list of sf objects to a single sf object</h1>
    <small class="dont-index">Source: <a href='https://github.com/a-benini/sfhelpers/blob/master/R/st_rbindlist.R'><code>R/st_rbindlist.R</code></a></small>
    <div class="hidden name"><code>st_rbindlist.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A fast alternative to <code>do.call(rbind, &lt;list_of_sf&gt;)</code></p>
    </div>

    <pre class="usage"><span class='fu'>st_rbindlist</span><span class='op'>(</span>
  <span class='va'>l</span>,
  <span class='va'>...</span>,
  use_geometry <span class='op'>=</span> <span class='cn'>FALSE</span>,
  use_any_geometry <span class='op'>=</span> <span class='cn'>FALSE</span>,
  geometry_name <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>l</th>
      <td><p><code>list</code> of objects of the class <code>sf</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments of the function <code><a href='https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html'>rbindlist</a></code>
except <code>l</code></p></td>
    </tr>
    <tr>
      <th>use_geometry</th>
      <td><p><code>TRUE</code> detects and binds the active list-columns
with simple feature geometries separately if all of them have the same
geometry type, thus enabling matching of geometry columns differing by
name as well as by position across the <code>list</code>ed sf objects.</p></td>
    </tr>
    <tr>
      <th>use_any_geometry</th>
      <td><p><code>TRUE</code> does the same as
<code>use_geometry = TRUE</code>, but allows different geometry types among the
<code>list</code>ed sf objects. If <code>use_any_geometry = TRUE</code> then
<code>use_geometry</code> is ignored.</p></td>
    </tr>
    <tr>
      <th>geometry_name</th>
      <td><p>a single character string giving a user-defined name to
the returned active list-column with simple feature geometries.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>sf</code> object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>st_rbindlist()</code> is basically a wrapper for
<code>sf::st_as_sf(data.table::rbindlist(&lt;list_of_sf&gt;))</code>, which is a fast
alternative to <code>do.call(rbind, &lt;list_of_sf&gt;)</code>. It comes with some
properties which <code>rbind</code> has, but <code>rbindlist</code> misses:</p><ul>
<li><p>checks if all <code>sf</code> objects included in the input share the same
CRS</p></li>
<li><p>returns a <code>sf</code> object with a correct <code>bbox</code> (more
information on how to handle this <code>rbindlist</code> issue can be found
<a href='https://github.com/Rdatatable/data.table/issues/4681'>here</a>).</p></li>
<li><p>allows binding <code>sf</code> objects with different geometry types, which
can be achieved by setting <code>st_rbindlist</code>'s argument
<code>use_any_geometry</code> to <code>TRUE</code>.</p></li>
</ul><p>Remarks about matching geometry columns of input <code>sf</code> objects:</p><ul>
<li><p>If the geometry columns are identically named, but differ by position
within
each <code>sf</code> object set <code>use.names = TRUE</code> and <code>fill = TRUE</code>.</p></li>
<li><p>If the geometry (and other) columns are differently named, but have
same position within every <code>sf</code> object set <code>use.names = FALSE</code>.</p></li>
<li><p>If the geometry columns are differently named and at the same time
differently positioned set <code>use_geometry = TRUE</code> or
<code>use_any_geometry = TRUE</code>. This detects the geometry columns and
then matches them separately while the other columns can be still treated
collectively by the arguments <code>use.names</code> and <code>fill</code>. Note that
matching geometry columns separately requires more processing time.</p></li>
</ul><p>If the argument <code>geometry_name</code> is unspecified (default <code>NULL</code>)
the geometry column name of the returned <code>sf</code> object depends on the
following:</p><ul>
<li><p>If separately matched geometry columns (<code>use_geometry = TRUE</code> or
<code>use_any_geometry = TRUE</code>) have a common name, this name persists,
else <code>"geometry"</code> is used.</p></li>
<li><p>If geometry (and other) columns are differently named and matched by
their same position (<code>use.names = FALSE</code>), the geometry column name
is inherited from the first <code>sf</code> object <code>list</code>ed in the input.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='../doc/rbindlist_issues.html'><code><a href='../articles/rbindlist_issues.html'>vignette("rbindlist_issues")</a></code></a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attache Paket: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>Die folgenden Objekte sind maskiert von ‘package:raster’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, select, union</span></div><div class='output co'>#&gt; <span class='message'>Die folgenden Objekte sind maskiert von ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>Die folgenden Objekte sind maskiert von ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>

<span class='co'># a set of geometries to work with</span>
<span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"gpkg/nc.gpkg"</span>, package <span class='op'>=</span> <span class='st'>"sf"</span><span class='op'>)</span>, quiet <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># proof of concept with a list of sf-objects having identically named and</span>
<span class='co'># positioned attribute and geometry columns:</span>
<span class='va'>list_of_sf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/ncell.html'>nrow</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='va'>nc</span><span class='op'>[</span><span class='va'>x</span>, <span class='op'>]</span><span class='op'>)</span>
<span class='va'>nc_new</span> <span class='op'>&lt;-</span> <span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>list_of_sf</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='va'>nc_new</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># list of sf-objects having differently named, but identically positioned</span>
<span class='co'># geometry columns (attribute columns are also same-positioned and still</span>
<span class='co'># same-named):</span>
<span class='va'>list_of_sf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span>
  <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/ncell.html'>nrow</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>,
  <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='st_rename_geometry.html'>st_rename_geometry</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='va'>x</span>, <span class='op'>]</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"geom_"</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='co'># such a list of sf-objects is easy to stack ...</span>
<span class='va'>nc_new_2</span> <span class='op'>&lt;-</span> <span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>list_of_sf</span>, use.name <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># ... but by default the name of the returned geometry column ...</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nc_new_2</span>, <span class='st'>"sf_column"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "geom_1"</div><div class='input'><span class='co'># ... is inherited from the first listed sf-object.</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nc_new_2</span>, <span class='st'>"sf_column"</span><span class='op'>)</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>list_of_sf</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, <span class='st'>"sf_column"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># user defined name of the stacked geometry column:</span>
<span class='va'>nc_new_3</span> <span class='op'>&lt;-</span> <span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>list_of_sf</span>, use.name <span class='op'>=</span> <span class='cn'>FALSE</span>, geometry_name <span class='op'>=</span> <span class='st'>"geom"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nc_new_3</span>, <span class='st'>"sf_column"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "geom"</div><div class='input'>
<span class='co'># from which listed element / sf-object do the stacked features originate?</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>A <span class='op'>=</span> <span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>]</span>, B <span class='op'>=</span> <span class='cn'>NULL</span>, C <span class='op'>=</span> <span class='va'>nc</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>)</span>
<span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>l</span>, idcol <span class='op'>=</span> <span class='st'>"ID"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 3 features and 4 fields
#&gt; Geometry type: MULTIPOLYGON
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -81.74107 ymin: 36.23388 xmax: -80.43531 ymax: 36.58965
#&gt; Geodetic CRS:  NAD27
#&gt;   ID  AREA PERIMETER CNTY_                           geom
#&gt; 1  A 0.114     1.442  1825 MULTIPOLYGON (((-81.47276 3...
#&gt; 2  C 0.061     1.231  1827 MULTIPOLYGON (((-81.23989 3...
#&gt; 3  C 0.143     1.630  1828 MULTIPOLYGON (((-80.45634 3...</div><div class='input'>
<span class='co'># list of sf-objects with identically named, but differently positioned</span>
<span class='co'># geometry and attribute columns (the latter might not be included in</span>
<span class='co'># each listed sf-object) ...</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span>, <span class='cn'>NULL</span><span class='op'>]</span>, <span class='va'>nc</span><span class='op'>[</span><span class='fl'>2</span>, <span class='fl'>1</span><span class='op'>]</span>, <span class='va'>nc</span><span class='op'>[</span><span class='fl'>3</span>, <span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>)</span>
<span class='co'># ... requires use.name = TRUE and fill = TRUE</span>
<span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>l</span>, use.name <span class='op'>=</span> <span class='cn'>TRUE</span>, fill <span class='op'>=</span> <span class='cn'>TRUE</span>, idcol <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 3 features and 4 fields
#&gt; Geometry type: MULTIPOLYGON
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -81.74107 ymin: 36.23388 xmax: -80.43531 ymax: 36.58965
#&gt; Geodetic CRS:  NAD27
#&gt;   .id  AREA PERIMETER CNTY_                           geom
#&gt; 1   1    NA        NA    NA MULTIPOLYGON (((-81.47276 3...
#&gt; 2   2 0.061        NA    NA MULTIPOLYGON (((-81.23989 3...
#&gt; 3   3    NA      1.63  1828 MULTIPOLYGON (((-80.45634 3...</div><div class='input'>
<span class='co'># list of sf-objects with differently named and positioned geometry columns,</span>
<span class='co'># and (if existing) identically named attribute columns ...</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>l</span><span class='op'>)</span>,
  <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='st_rename_geometry.html'>st_rename_geometry</a></span><span class='op'>(</span><span class='va'>l</span><span class='op'>[[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>]</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"geom_"</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>l</span>, <span class='va'>attr</span>, <span class='st'>"sf_column"</span><span class='op'>)</span> <span class='co'># geometry column names of listed sf-objects</span>
</div><div class='output co'>#&gt; [1] "geom_1" "geom_2" "geom_3"</div><div class='input'><span class='co'># ... requires use_geometry = TRUE for detecting and binding the geometry</span>
<span class='co'># columns (separately from the attribute columns)</span>
<span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>l</span>, use.name <span class='op'>=</span> <span class='cn'>TRUE</span>, fill <span class='op'>=</span> <span class='cn'>TRUE</span>, idcol <span class='op'>=</span> <span class='cn'>TRUE</span>, use_geometry <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 3 features and 4 fields
#&gt; Geometry type: MULTIPOLYGON
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -81.74107 ymin: 36.23388 xmax: -80.43531 ymax: 36.58965
#&gt; Geodetic CRS:  NAD27
#&gt;   .id  AREA PERIMETER CNTY_                       geometry
#&gt; 1   1    NA        NA    NA MULTIPOLYGON (((-81.47276 3...
#&gt; 2   2 0.061        NA    NA MULTIPOLYGON (((-81.23989 3...
#&gt; 3   3    NA      1.63  1828 MULTIPOLYGON (((-80.45634 3...</div><div class='input'>
<span class='co'># list of sf-objects having different geometry types,</span>
<span class='co'>#  all columns identically named and positioned ...</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  multi_poly <span class='op'>=</span> <span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>]</span>,
  no_row     <span class='op'>=</span> <span class='va'>nc</span><span class='op'>[</span><span class='cn'>NULL</span>, <span class='op'>]</span>,
  poly       <span class='op'>=</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_cast.html'>st_cast</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>4</span>, <span class='op'>]</span>, <span class='st'>"POLYGON"</span>, warn <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>,
  empty_row  <span class='op'>=</span> <span class='va'>nc</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/ncell.html'>nrow</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span>, <span class='op'>]</span>
  <span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>l</span>, <span class='va'>st_geometry_type</span>, by_geometry <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   multi_poly       no_row         poly    empty_row 
#&gt; MULTIPOLYGON     GEOMETRY      POLYGON     GEOMETRY 
#&gt; 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE</div><div class='input'><span class='co'># ... requires use_any_geometry = TRUE</span>
<span class='va'>st_obj</span> <span class='op'>&lt;-</span> <span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>l</span>, idcol <span class='op'>=</span> <span class='cn'>TRUE</span>, use_any_geometry <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>st_obj</span><span class='op'>[</span>, <span class='st'>".id"</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>geometry_type <span class='op'>=</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_geometry_type.html'>st_geometry_type</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 6 features and 2 fields (with 1 geometry empty)
#&gt; Geometry type: GEOMETRY
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -81.74107 ymin: 36.07282 xmax: -75.77316 ymax: 36.58965
#&gt; Geodetic CRS:  NAD27
#&gt;          .id                           geom      geometry_type
#&gt; 1 multi_poly MULTIPOLYGON (((-81.47276 3...       MULTIPOLYGON
#&gt; 2 multi_poly MULTIPOLYGON (((-81.23989 3...       MULTIPOLYGON
#&gt; 3       poly POLYGON ((-76.00897 36.3196...            POLYGON
#&gt; 4       poly POLYGON ((-76.02717 36.5567...            POLYGON
#&gt; 5       poly POLYGON ((-75.90199 36.5562...            POLYGON
#&gt; 6  empty_row       GEOMETRYCOLLECTION EMPTY GEOMETRYCOLLECTION</div><div class='input'>
<span class='co'># list of sf-objects having different geometry types as well as having</span>
<span class='co'># differently named and positioned geometry columns, and (if existing)</span>
<span class='co'># identically named attribute columns ...</span>
<span class='va'>l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>l</span><span class='op'>)</span>,
  <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span><span class='fu'><a href='st_rename_geometry.html'>st_rename_geometry</a></span><span class='op'>(</span><span class='va'>l</span><span class='op'>[[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>]</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"geom_"</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>.</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>:</span><span class='va'>x</span><span class='op'>]</span><span class='op'>}</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/setNames.html'>setNames</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/names.html'>names</a></span><span class='op'>(</span><span class='va'>l</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># ... requires use.name, fill and use_any_geometry all being set to TRUE</span>
<span class='fu'>st_rbindlist</span><span class='op'>(</span><span class='va'>l</span>, use.name <span class='op'>=</span> <span class='cn'>TRUE</span>, fill <span class='op'>=</span> <span class='cn'>TRUE</span>, idcol <span class='op'>=</span> <span class='cn'>TRUE</span>, use_any_geometry <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 6 features and 5 fields (with 1 geometry empty)
#&gt; Geometry type: GEOMETRY
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -81.74107 ymin: 36.07282 xmax: -75.77316 ymax: 36.58965
#&gt; Geodetic CRS:  NAD27
#&gt;          .id  AREA PERIMETER CNTY_ CNTY_ID                       geometry
#&gt; 1 multi_poly 0.114        NA    NA      NA MULTIPOLYGON (((-81.47276 3...
#&gt; 2 multi_poly 0.061        NA    NA      NA MULTIPOLYGON (((-81.23989 3...
#&gt; 3       poly 0.070     2.968  1831      NA POLYGON ((-76.00897 36.3196...
#&gt; 4       poly 0.070     2.968  1831      NA POLYGON ((-76.02717 36.5567...
#&gt; 5       poly 0.070     2.968  1831      NA POLYGON ((-75.90199 36.5562...
#&gt; 6  empty_row    NA        NA    NA      NA       GEOMETRYCOLLECTION EMPTY</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Attilio Benini.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


